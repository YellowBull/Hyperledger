# Hyperledger Fabric Membership Service Providers（MSP）--成员服务

Membership Service Provider（MSP）是一个旨在提供成员操作体系结构抽象的组件。<br/>
尤其是MSP抽象出发布和验证证书的所有加密机制、协议以及用户身份验证。
MSP可以自定义身份概念，以及这些身份被管理的规则（身份验证）和认证加密（签名生成和验证）。<br/>
一个Hyperledger Fabric区块链网络可以由一个或多个MSPs管理。者提供了成员操作的模块化，以及跨不同成员标准和体系结构的
相互操作性。<br/>

## MSP配置
要设置MSP的一个实例，在所有的peer和orderer（启用peer和orderer签名）的本地需指定他的配置，并在channel上启动peer、order和
客户端的身份验证，并未通过和channel中所有成员分别签名验证（鉴定）。<br/>
首先，为了在网络中引用MSP（例如msp1、org2和org3.divA），每个MSP都需要指定一个名称。这个名称是被一个channel所使用的属于MSP
的成员规则（配置）可能是一个集团、机构或是机构部门采用的名称。这也是被称为MSP标识符或MSP ID。MSP标识符必须是唯一的每个MSP实例
。例如，如果在系统channel检查是发现两个MSP实例，那么orderer设置会失败。< ，br/>
在MSP的缺省实现中，需要指定一组参数来允许身份（证书）验证和签名验证。这些参数由RFC5280推导出来包括如下：<br/>
* 一个自签署的(X.509)证书列表来构成信任的根。
* 把一个表示为中间CAs的X.509证书列表作为提供者的证书验证；这些证书应当由信任的根证书中的一个证书进行认证；中的CAs是可选参数
* 一个（X.509）证书的列表和授信的根证书集的证书路径作为MPS的管理员，这些证书的所有者被授权请求对MSP配置进行更改（例如，根ca，中间CAs）
* 这个MSP的有效成员应该包含在他们的X.509证书中，这是一个可选的配置参数，例如用在多个组织使用相同的信任根和中间CAs，并为其成员预留了一个OU（ Organizational Units/组织单元）字段。.
* 证书撤销列表集（CRLs——certificate revocation lists）中的每一个列表都对应一个列出的（中间或者根）MSP证书颁发机构；这是一个可选参数
* 一个自签署的（X.509）证书列表构成了授信TLS证书的TLS根
* 提供者考虑一个表示为中间TLS  CAs的X.509证书列表，这些证书应该由授信的TLS根证书中的一个证书进行认证，中间CAs是可选参数
为了满足以下条件，需要使用这个MSP实例的有效身份： <br/>
* 它们以证书的形式存在，并具有可验证的证书路径，以完全信任证书的根
* 不包括在任何证书撤销列表（CRLs——certificate revocation lists）中
* 在证书结构的OU（ Organizational Units/组织单元）字段中列出了MSP配置的一个或多个组织单元
除了验证相关的参数之外，为了使MSP能够在实例化的节点上进行签名或验证，还需要做出如下指定： <br/>
* 用于在节点上签署的签名键（目前仅支持ECDSA键）
* 节点的X.509证书，在MSP的验证参数下是一个有效的身份
重要的是要注意到MSP的身份永远不会过期;只有将它们添加到相应的证书撤销列表（CRLs——certificate revocation lists）中才能撤销它们。此外，目前还没有对强制撤销TLS证书的支持
### 如何生成MSP证书及其签名密钥
为了生成用于提供其MSP配置的X.509证书，应用程序可以使用Openssl。在Hyperledger Fabric中没有包括对RSA密钥在内的证书的支持。<br/>
